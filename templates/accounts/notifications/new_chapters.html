{% extends "base.html" %}
{% block title %}Yangi boblar - MangaLab{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto p-4">
  <div class="flex items-center justify-between mb-4">
    <h1 class="text-2xl font-bold">Yangi boblar</h1>
    <div class="flex gap-2">
      <form method="post" action="{% url 'accounts:mark_notifications_seen' %}">
        {% csrf_token %}
        <button class="px-3 h-9 rounded-lg bg-white/10 hover:bg-white/15">Barchasini ko‘rilgan</button>
      </form>
      <form method="post" action="{% url 'accounts:clear_notifications' %}">
        {% csrf_token %}
        <button class="px-3 h-9 rounded-lg bg-red-600/90 hover:bg-red-600">Tozalash</button>
      </form>
    </div>
  </div>

  {% if items %}
    <ul class="space-y-3">
      {% for n in items %}
        <li class="p-3 rounded-lg border border-white/10 bg-[#151f2f] flex items-center gap-3">
          <img src="{{ n.manga.cover_image.url }}" class="w-14 h-20 object-cover rounded-md" alt="">
          <div class="flex-1">
            <div class="font-semibold">
              <a href="{% url 'manga:manga_details' n.manga.slug %}" class="hover:text-purple-400">{{ n.manga.title }}</a>
              {% if not n.is_seen %}<span class="ml-2 text-xs px-2 py-0.5 rounded bg-emerald-600/80">Yangi</span>{% endif %}
            </div>
            <div class="text-slate-300">
              Bob: {{ n.chapter.chapter_number }}, Jild: {{ n.chapter.volume }}
            </div>
            <div class="text-slate-400 text-sm">
              {{ n.created_at|timesince }} oldin • {{ n.expires_at|timeuntil }} qolgan
            </div>
            <div class="mt-2">
              <a class="inline-flex items-center gap-2 px-3 h-9 rounded-lg bg-purple-600 hover:bg-purple-500"
                 href="{% url 'manga:chapter_read' n.manga.slug n.chapter.volume n.chapter.chapter_number %}">
                 O‘qish
              </a>
            </div>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <div class="text-slate-300">Hozircha bildirishnoma yo‘q.</div>
  {% endif %}
</div>
{% endblock %}
